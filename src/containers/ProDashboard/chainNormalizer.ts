export const CHAIN_DISPLAY_NAME_MAP: Record<string, string> = {
	'op mainnet': 'OP Mainnet',
	'op-mainnet': 'OP Mainnet',
	optimism: 'OP Mainnet',

	gnosis: 'Gnosis',
	xdai: 'Gnosis',

	'hyperliquid l1': 'Hyperliquid L1',
	hyperliquid: 'Hyperliquid L1',
	'hyperliquid-l1': 'Hyperliquid L1',
	hyperliquid_l1: 'Hyperliquid L1',

	'zksync era': 'ZKsync Era',
	zksync: 'ZKsync Era',
	'zksync-era': 'ZKsync Era',
	zksync_era: 'ZKsync Era',
	era: 'ZKsync Era',

	'polygon zkevm': 'Polygon zkEVM',
	'polygon-zkevm': 'Polygon zkEVM',
	polygon_zkevm: 'Polygon zkEVM',

	'immutable zkevm': 'Immutable zkEVM',
	'immutable-zkevm': 'Immutable zkEVM',
	immutable_zkevm: 'Immutable zkEVM',
	imx: 'Immutable zkEVM',
	immutablex: 'Immutable zkEVM',

	'cronos zkevm': 'Cronos zkEVM',
	'cronos-zkevm': 'Cronos zkEVM',
	cronos_zkevm: 'Cronos zkEVM',

	'arbitrum nova': 'Arbitrum Nova',
	'arbitrum-nova': 'Arbitrum Nova',
	arbitrum_nova: 'Arbitrum Nova',

	bsc: 'BSC',
	binance: 'BSC',
	'binance smart chain': 'BSC',

	avalanche: 'Avalanche',
	avax: 'Avalanche',

	cosmoshub: 'CosmosHub',
	cosmos: 'CosmosHub',

	pulsechain: 'PulseChain',
	pulse: 'PulseChain',

	'eos evm': 'EOS EVM',
	eos: 'EOS EVM',

	ethereum: 'Ethereum',
	arbitrum: 'Arbitrum',
	polygon: 'Polygon',
	base: 'Base',
	solana: 'Solana',
	bitcoin: 'Bitcoin',
	tron: 'Tron',
	sui: 'Sui',
	aptos: 'Aptos',
	ton: 'TON',
	near: 'Near',
	fantom: 'Fantom',
	celo: 'Celo',
	moonbeam: 'Moonbeam',
	moonriver: 'Moonriver',
	harmony: 'Harmony',
	cronos: 'Cronos',
	kava: 'Kava',
	linea: 'Linea',
	scroll: 'Scroll',
	mantle: 'Mantle',
	blast: 'Blast',
	mode: 'Mode',
	manta: 'Manta',
	sei: 'Sei',
	injective: 'Injective',
	osmosis: 'Osmosis',
	starknet: 'Starknet',
	ronin: 'Ronin',
	metis: 'Metis',
	boba: 'Boba',
	aurora: 'Aurora',
	canto: 'Canto',
	evmos: 'Evmos',
	klaytn: 'Klaytn',
	fuse: 'Fuse',
	astar: 'Astar',
	telos: 'Telos',
	zora: 'Zora',
	fraxtal: 'Fraxtal',
	taiko: 'Taiko',
	zklink: 'zkLink',
	bob: 'BOB',
	merlin: 'Merlin',
	berachain: 'Berachain',
	sonic: 'Sonic',
	abstract: 'Abstract',
	ink: 'Ink',
	unichain: 'Unichain',
	soneium: 'Soneium',
	morph: 'Morph',
	corn: 'Corn',
	hemi: 'Hemi',
	sophon: 'Sophon',
	dydx: 'dYdX',
	hedera: 'Hedera',
	cardano: 'Cardano',
	algorand: 'Algorand',
	flow: 'Flow',
	icp: 'ICP',
	tezos: 'Tezos',
	waves: 'Waves',
	stellar: 'Stellar',
	ripple: 'Ripple',
	filecoin: 'Filecoin',
	flare: 'Flare',
	thorchain: 'Thorchain',
	stacks: 'Stacks',

	opbnb: 'opBNB',
	op_bnb: 'opBNB',
	'op-bnb': 'opBNB',

	'x layer': 'X Layer',
	'x-layer': 'X Layer',
	xlayer: 'X Layer',

	'sx network': 'SX Network',
	'sx-network': 'SX Network',
	sx_network: 'SX Network',
	sxnetwork: 'SX Network',

	shimmerevm: 'ShimmerEVM',
	shimmer_evm: 'ShimmerEVM',
	'shimmer-evm': 'ShimmerEVM',

	'iota evm': 'IOTA EVM',
	'iota-evm': 'IOTA EVM',
	iotaevm: 'IOTA EVM',
	iota_evm: 'IOTA EVM',

	'plume mainnet': 'Plume Mainnet',
	'plume-mainnet': 'Plume Mainnet',
	plume_mainnet: 'Plume Mainnet',

	'asset chain': 'Asset Chain',
	'asset-chain': 'Asset Chain',
	assetchain: 'Asset Chain',

	'defichain evm': 'DeFiChain EVM',
	'defichain-evm': 'DeFiChain EVM',
	defichain_evm: 'DeFiChain EVM',

	'zero network': 'Zero Network',
	'zero-network': 'Zero Network',
	zero_network: 'Zero Network',

	ethereumclassic: 'EthereumClassic',
	'ethereum-classic': 'EthereumClassic',
	ethereum_classic: 'EthereumClassic',

	godwokenv1: 'GodwokenV1',
	godwoken_v1: 'GodwokenV1',
	'godwoken-v1': 'GodwokenV1',

	ontologyevm: 'OntologyEVM',
	ontology_evm: 'OntologyEVM',
	'ontology-evm': 'OntologyEVM',

	'off chain': 'Off Chain',
	'off-chain': 'Off Chain',
	off_chain: 'Off Chain',

	bitcoincash: 'Bitcoincash',
	'bitcoin-cash': 'Bitcoincash',
	bitcoin_cash: 'Bitcoincash',

	goat: 'GOAT',

	grvt: 'GRVT',

	edgex: 'edgeX',

	soonbase: 'soonBase',
	soon_base: 'soonBase',

	'xrpl evm': 'XRPL EVM',
	'xrpl-evm': 'XRPL EVM',
	xrplevm: 'XRPL EVM',
	xrpl_evm: 'XRPL EVM',
}

export const CHAIN_TO_DIMENSIONS_SLUG: Record<string, string> = {
	'OP Mainnet': 'optimism',
	Gnosis: 'xdai',
	'Hyperliquid L1': 'hyperliquid',
	'ZKsync Era': 'era',
	'Polygon zkEVM': 'polygon_zkevm',
	'Immutable zkEVM': 'imx',
	'Cronos zkEVM': 'cronos_zkevm',
	'Arbitrum Nova': 'arbitrum_nova',
	BSC: 'bsc',
	Avalanche: 'avax',
	CosmosHub: 'cosmoshub',
	PulseChain: 'pulse',
}

export const DIMENSIONS_SLUG_TO_OVERVIEW: Record<string, string> = {
	optimism: 'OP Mainnet',
	xdai: 'Gnosis',
	hyperliquid: 'Hyperliquid L1',
	era: 'ZKsync Era',
	zksync: 'ZKsync Era',
	polygon_zkevm: 'Polygon zkEVM',
	imx: 'Immutable zkEVM',
	cronos_zkevm: 'Cronos zkEVM',
	arbitrum_nova: 'Arbitrum Nova',
	avax: 'Avalanche',
	bsc: 'BSC',
	pulse: 'PulseChain',
	cosmoshub: 'CosmosHub',
	opbnb: 'opBNB',
	op_bnb: 'opBNB',
	xlayer: 'X Layer',
	sx_network: 'SX Network',
	shimmer_evm: 'ShimmerEVM',
	iotaevm: 'IOTA EVM',
	iota_evm: 'IOTA EVM',
	plume_mainnet: 'Plume Mainnet',
	assetchain: 'Asset Chain',
	defichain_evm: 'DeFiChain EVM',
	zero_network: 'Zero Network',
	ethereumclassic: 'EthereumClassic',
	godwoken_v1: 'GodwokenV1',
	ontology_evm: 'OntologyEVM',
	off_chain: 'Off Chain',
	soon_base: 'soonBase',
	xrplevm: 'XRPL EVM',
	xrpl_evm: 'XRPL EVM',
}

export function normalizeChainName(chain: string | null | undefined): string {
	if (!chain) return ''
	const lc = chain.toLowerCase().trim()

	if (CHAIN_DISPLAY_NAME_MAP[lc]) {
		return CHAIN_DISPLAY_NAME_MAP[lc]
	}

	return chain
}

const CHAIN_SLUG_MAP: Record<string, string> = {
	optimism: 'op-mainnet',
	'op mainnet': 'op-mainnet',
	binance: 'bsc',
	xdai: 'gnosis',
	cosmos: 'cosmoshub',
	pulse: 'pulsechain',
	hyperliquid: 'hyperliquid-l1',
	'hyperliquid l1': 'hyperliquid-l1',
	hyperliquid_l1: 'hyperliquid-l1',
	zksync: 'zksync-era',
	'zksync era': 'zksync-era',
	zksync_era: 'zksync-era',
	era: 'zksync-era',
	'polygon zkevm': 'polygon-zkevm',
	polygon_zkevm: 'polygon-zkevm',
	'immutable zkevm': 'immutable-zkevm',
	immutable_zkevm: 'immutable-zkevm',
	imx: 'immutable-zkevm',
	immutablex: 'immutable-zkevm',
	'cronos zkevm': 'cronos-zkevm',
	cronos_zkevm: 'cronos-zkevm',
	'arbitrum nova': 'arbitrum-nova',
	arbitrum_nova: 'arbitrum-nova',
	avax: 'avalanche',
}

export function toChainSlug(chain: string | null | undefined): string {
	if (!chain) return ''
	const lc = chain.toLowerCase().trim()

	if (CHAIN_SLUG_MAP[lc]) {
		return CHAIN_SLUG_MAP[lc]
	}

	const slug = lc.replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '')

	if (CHAIN_SLUG_MAP[slug]) {
		return CHAIN_SLUG_MAP[slug]
	}

	return slug
}

export function toDimensionsSlug(chain: string | null | undefined): string {
	if (!chain) return ''

	const normalized = normalizeChainName(chain)

	if (CHAIN_TO_DIMENSIONS_SLUG[normalized]) {
		return CHAIN_TO_DIMENSIONS_SLUG[normalized]
	}

	return normalized.toLowerCase().replace(/\s+/g, '_')
}

export function fromDimensionsSlugToOverview(slug: string | null | undefined): string {
	if (!slug) return ''
	const lc = slug.toLowerCase()

	if (DIMENSIONS_SLUG_TO_OVERVIEW[lc]) {
		return DIMENSIONS_SLUG_TO_OVERVIEW[lc]
	}

	return slug
		.replace(/_/g, '-')
		.split('-')
		.map((word) => (word.length > 0 ? word[0].toUpperCase() + word.slice(1) : word))
		.join(' ')
}

export function formatChainForUrl(chain: string | null | undefined): string {
	if (!chain) return ''
	return chain.includes(' ') ? encodeURIComponent(chain) : chain
}

export function isSameChain(chain1: string | null | undefined, chain2: string | null | undefined): boolean {
	if (!chain1 || !chain2) return false
	return normalizeChainName(chain1) === normalizeChainName(chain2)
}

export function createChainMatchSet(chains: string[]): Set<string> {
	const set = new Set<string>()
	for (const chain of chains) {
		if (!chain) continue
		set.add(chain)
		set.add(chain.toLowerCase())
		const normalized = normalizeChainName(chain)
		set.add(normalized)
		set.add(normalized.toLowerCase())
		const slug = toDimensionsSlug(chain)
		if (slug) {
			set.add(slug)
			set.add(slug.toLowerCase())
		}
	}
	return set
}

export const CHAIN_NAME_ALIASES: Record<string, string[]> = {
	'OP Mainnet': ['Optimism', 'optimism', 'op mainnet', 'op-mainnet'],
	BSC: ['Binance', 'binance', 'bsc'],
	Gnosis: ['xDai', 'xdai'],
	CosmosHub: ['Cosmos', 'cosmos'],
	PulseChain: ['Pulse', 'pulse'],
	'EOS EVM': ['EOS', 'eos'],
	Avalanche: ['avax', 'AVAX'],
	'ZKsync Era': ['zksync', 'era', 'zksync-era', 'zksync_era', 'zkSync Era'],
	'Polygon zkEVM': ['polygon_zkevm', 'polygon-zkevm'],
	'Immutable zkEVM': ['imx', 'immutable_zkevm', 'immutable-zkevm'],
	'Cronos zkEVM': ['cronos_zkevm', 'cronos-zkevm'],
	'Arbitrum Nova': ['arbitrum_nova', 'arbitrum-nova'],
	'Hyperliquid L1': ['Hyperliquid', 'hyperliquid', 'hyperliquid-l1', 'hyperliquid_l1'],
}
